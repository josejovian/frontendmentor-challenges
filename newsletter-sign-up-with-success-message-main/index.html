<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- displays site properly based on user's device -->

    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./assets/images/favicon-32x32.png"
    />

    <title>
      Frontend Mentor | Newsletter sign-up form with success message
    </title>

    <!-- Feel free to remove these styles or customise in your own stylesheet 👍 -->
    <link rel="stylesheet" href="./style.css" />
  </head>

  <body>
    <!-- Sign-up form start -->

    <article id="register-card" class="card">
      <div class="register-card__main">
        <section class="register-card__instruction">
          <h1>Stay updated!</h1>
          <p>Join 60,000+ product managers receiving monthly updates on:</p>
          <ul class="register-card__list">
            <li><p>Product discovery and building what matters</p></li>
            <li><p>Measuring to ensure updates are a success</p></li>
            <li><p>And much more!</p></li>
          </ul>
        </section>
        <section class="register-card__form">
          <div class="form__head">
            <span class="form__title">Email address</span>
            <span id="form__warning">Valid email required</span>
          </div>
          <input
            class="form__input"
            id="email"
            type="email"
            placeholder="email@company.com"
          />
          <button id="form__submit">Subscribe to monthly newsletter</button>
        </section>
      </div>
      <img
        class="register-card__illust-desktop"
        src="./assets/images/illustration-sign-up-desktop.svg"
      />
      <img
        class="register-card__illust-mobile"
        src="./assets/images/illustration-sign-up-mobile.svg"
      />
    </article>

    <!-- Sign-up form end -->

    <!-- Success message start -->

    <article id="success-message" class="card">
      <section class="success-message__main">
        <img
          class="success-message__illustration"
          src="./assets/images/icon-success.svg"
        />
        <h1>Thanks for subscribing!</h1>
        <p class="success-message__description">
          A confirmation email has been sent to
          <strong id="success-message__email">ash@loremcompany.com</strong>.
          Please open it and click the button inside to confirm your
          subscription.
        </p>
      </section>
      <button id="success-message__action">Dismiss message</button>
    </article>

    <!-- Success message end -->

    <footer class="attribution">
      <p>
        Challenge by
        <a href="https://www.frontendmentor.io?ref=challenge" target="_blank"
          >Frontend Mentor</a
        >. Coded by <a href="https://github.com/josejovian">Jose Jovian</a>.
      </p>
    </footer>

    <script>
      const emailElm = document.getElementById("email");
      const warningTextElm = document.getElementById("form__warning");

      function showError() {
        warningTextElm.style.display = "block";
        emailElm.classList = "form__input form__input--error";
      }

      function hideError() {
        warningTextElm.style.display = "none";
        emailElm.classList = "form__input";
      }

      function validateEmail(email = "") {
        let verdict = (() => {
          if (email === "") return false;
          const regex = new RegExp(/^\S+@\S+\.\S+$/);
          console.log(email);
          return regex.test(email);
        })();

        if (verdict) {
          hideError();
        } else {
          showError();
        }

        return verdict;
      }

      function showSuccess(target = string) {
        document.getElementById("register-card").style.display = "none";
        document.getElementById("success-message").style.display = "flex";
        document.getElementById("success-message__email").innerHTML = target;
      }

      function hideSuccess() {
        document.getElementById("register-card").style.display = "flex";
        document.getElementById("success-message").style.display = "none";
      }

      const submitBtn = document.getElementById("form__submit");
      submitBtn.addEventListener("click", () => {
        const isValid = validateEmail(emailElm.value);

        isValid && showSuccess(emailElm.value);
      });

      const dismissBtn = document.getElementById("success-message__action");
      dismissBtn.addEventListener("click", hideSuccess);
    </script>
  </body>
</html>
